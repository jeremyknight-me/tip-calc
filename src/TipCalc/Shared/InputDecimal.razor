@inherits InputNumber<decimal>

<input @attributes="AdditionalAttributes"
       type="number"
       class="@CssClass"
       value="@_stringValue"
       @oninput="OnInput"
       @onblur="OnBlur" />

@code {
    private string _stringValue;
    private decimal _last;

    protected override void OnParametersSet()
    {
        if (!CurrentValue.Equals(_last))
        {
            _last = CurrentValue;
            _stringValue = CurrentValueAsString;
        }
    }

    private void OnInput(ChangeEventArgs e)
    {
        CurrentValueAsString = _stringValue = e.Value.ToString();
        _last = CurrentValue;
    }

    private void OnBlur(FocusEventArgs e)
    {
        if (!EditContext.GetValidationMessages(FieldIdentifier).Any())
        {
            _stringValue = CurrentValueAsString;
        }
    }
}
